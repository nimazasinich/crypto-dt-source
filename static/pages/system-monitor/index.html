<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مانیتور سیستم | سیستم جامع ارزهای دیجیتال</title>
  <link rel="stylesheet" href="/static/pages/system-monitor/system-monitor.css">
</head>
<body>
  <div class="monitor-container">
    <!-- Header -->
    <header class="monitor-header">
      <div class="header-content">
        <h1>
          <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"/>
            <circle cx="12" cy="12" r="6"/>
            <circle cx="12" cy="12" r="2"/>
            <line x1="12" y1="2" x2="12" y2="4"/>
            <line x1="12" y1="20" x2="12" y2="22"/>
            <line x1="2" y1="12" x2="4" y2="12"/>
            <line x1="20" y1="12" x2="22" y2="12"/>
          </svg>
          مانیتور سیستم Real-Time
        </h1>
        <p class="header-subtitle">نمایش زنده وضعیت شبکه و سیستم</p>
      </div>
      <div class="header-actions">
        <div class="status-badge" id="system-status">
          <span class="status-dot"></span>
          <span class="status-text">در حال بارگذاری...</span>
        </div>
        <button class="refresh-btn" id="refresh-btn" title="بروزرسانی">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
          </svg>
        </button>
        <span class="last-update" id="last-update">--</span>
      </div>
    </header>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card" data-animate="fade-up">
        <div class="stat-header">
          <h3>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="2" y="2" width="20" height="8" rx="2"/>
              <rect x="2" y="14" width="20" height="8" rx="2"/>
              <line x1="6" y1="6" x2="6.01" y2="6"/>
              <line x1="6" y1="18" x2="6.01" y2="18"/>
            </svg>
            سرور API
          </h3>
          <div class="status-indicator online">
            <span class="status-dot"></span>
            <span>آنلاین</span>
          </div>
        </div>
        <div class="stat-value">
          <span class="big-number" id="server-requests">0</span>
          <span class="stat-label">درخواست/دقیقه</span>
        </div>
        <div class="stat-progress">
          <div class="progress-bar" id="server-load" style="width: 0%"></div>
        </div>
        <div class="stat-footer">
          <span>بار سرور: <strong id="server-load-text">0%</strong></span>
        </div>
      </div>

      <div class="stat-card" data-animate="fade-up" data-delay="100">
        <div class="stat-header">
          <h3>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <ellipse cx="12" cy="5" rx="9" ry="3"/>
              <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
              <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
            </svg>
            پایگاه داده
          </h3>
          <div class="status-indicator online">
            <span class="status-dot"></span>
            <span>فعال</span>
          </div>
        </div>
        <div class="stat-value">
          <span class="big-number" id="db-size">0</span>
          <span class="stat-label">MB استفاده شده</span>
        </div>
        <div class="stat-progress">
          <div class="progress-bar" id="db-usage" style="width: 0%"></div>
        </div>
        <div class="stat-footer">
          <span>کوئری‌ها: <strong id="db-queries">0</strong>/ثانیه</span>
        </div>
      </div>

      <div class="stat-card" data-animate="fade-up" data-delay="200">
        <div class="stat-header">
          <h3>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
            مدل‌های AI
          </h3>
          <div class="status-indicator online">
            <span class="status-dot"></span>
            <span>آماده</span>
          </div>
        </div>
        <div class="stat-grid-mini">
          <div class="stat-mini">
            <span class="mini-number" id="ai-total">0</span>
            <span class="mini-label">کل مدل‌ها</span>
          </div>
          <div class="stat-mini success">
            <span class="mini-number" id="ai-active">0</span>
            <span class="mini-label">فعال</span>
          </div>
        </div>
      </div>

      <div class="stat-card" data-animate="fade-up" data-delay="300">
        <div class="stat-header">
          <h3>
            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/>
              <path d="M2 12h20"/>
            </svg>
            منابع داده
          </h3>
          <div class="status-indicator online">
            <span class="status-dot"></span>
            <span>متصل</span>
          </div>
        </div>
        <div class="stat-grid-mini">
          <div class="stat-mini">
            <span class="mini-number" id="sources-total">0</span>
            <span class="mini-label">کل منابع</span>
          </div>
          <div class="stat-mini success">
            <span class="mini-number" id="sources-healthy">0</span>
            <span class="mini-label">سالم</span>
          </div>
        </div>
        <div class="stat-footer">
          <span style="color: #f59e0b;">تخریب شده: <strong id="sources-degraded">0</strong></span>
          <span style="color: #ef4444; margin-left: 12px;">آفلاین: <strong id="sources-offline">0</strong></span>
        </div>
      </div>
    </div>

    <!-- Network Visualization -->
    <div class="network-section" data-animate="fade-up" data-delay="400">
      <div class="section-header">
        <h2>
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M16 2l4 4-4 4"/>
            <path d="M8 22l-4-4 4-4"/>
            <path d="M21 6H3"/>
            <path d="M21 18H3"/>
          </svg>
          فعالیت شبکه
        </h2>
        <div class="network-legend">
          <div class="legend-item">
            <span class="legend-dot online"></span>
            <span>منابع فعال</span>
          </div>
          <div class="legend-item">
            <span class="legend-dot">></span>
            <span>انتقال داده</span>
          </div>
          <div class="legend-item">
            <span class="legend-dot processing"></span>
            <span>در حال پردازش</span>
          </div>
        </div>
      </div>
      <div class="network-canvas-wrapper">
        <canvas id="network-canvas"></canvas>
        <div class="network-stats">
          <div class="network-stat">
            <span class="network-stat-label">بسته‌های فعال:</span>
            <span class="network-stat-value" id="packets-count">0</span>
          </div>
          <div class="network-stat">
            <span class="network-stat-label">کلاینت‌ها:</span>
            <span class="network-stat-value" id="clients-count">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Activity Log -->
    <div class="activity-section" data-animate="fade-up" data-delay="500">
      <div class="section-header">
        <h2>
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <line x1="9" y1="9" x2="15" y2="9"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
          </svg>
          فعالیت‌های اخیر
        </h2>
        <button class="clear-btn" id="clear-log">پاک کردن</button>
      </div>
      <div class="activity-log" id="activity-log">
        <!-- Activities will be added here -->
      </div>
    </div>
  </div>

  <!-- Use Real Backend Version -->
  <script src="/static/pages/system-monitor/system-monitor-real.js"></script>
</body>
</html>
