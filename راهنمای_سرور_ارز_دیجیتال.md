# ุฑุงูููุง ุณุฑูุฑ ุฏุงุฏูโูุง ุงุฑุฒ ุฏุฌุชุงู

## โ ูพุงุฏูโุณุงุฒ ฺฉุงูู ุดุฏ

ฺฉ ุณุฑูุฑ ุฌุงูุน ุจุฑุง ุฏุงุฏูโูุง ุงุฑุฒ ุฏุฌุชุงู ุจุง ูพุดุชุจุงู ฺฉุงูู ุงุฒ HTTP (GET, POST) ู WebSocket ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.

## ๐ฏ ูุงุจูุชโูุง ูพุงุฏูโุณุงุฒ ุดุฏู

### 1. ุฏุฑุฎูุงุณุชโูุง HTTP GET

#### GET /api/market/price
โ ุฏุฑุงูุช ููุช ูุนู ุงุฑุฒ ุฏุฌุชุงู
```bash
curl "http://localhost:8000/api/market/price?symbol=BTC"
```

**ูพุงุณุฎ ููููู:**
```json
{
  "symbol": "BTC",
  "price": 50000.50,
  "timestamp": 1633659200000,
  "source": "binance"
}
```

#### GET /api/market/ohlc
โ ุฏุฑุงูุช ุฏุงุฏูโูุง ุชุงุฑุฎ OHLC (Open, High, Low, Close)
```bash
curl "http://localhost:8000/api/market/ohlc?symbol=ETH&timeframe=1h&limit=10"
```

**ุจุงุฒูโูุง ุฒูุงู ูพุดุชุจุงู ุดุฏู:**
- `1m` - 1 ุฏููู
- `5m` - 5 ุฏููู
- `15m` - 15 ุฏููู
- `30m` - 30 ุฏููู
- `1h` - 1 ุณุงุนุช
- `4h` - 4 ุณุงุนุช
- `1d` - 1 ุฑูุฒ
- `1w` - 1 ููุชู

### 2. ุฏุฑุฎูุงุณุชโูุง HTTP POST

#### POST /api/sentiment/analyze
โ ุชุญูู ุงุญุณุงุณุงุช ูุชู (ุตุนูุฏุ ูุฒููุ ุฎูุซ)
```bash
curl -X POST "http://localhost:8000/api/sentiment/analyze" \
  -H "Content-Type: application/json" \
  -d '{"text": "ุจุชโฺฉูู ุฏุฑ ุญุงู ุงูุฒุงุด ุงุณุช! ุญุฑฺฉุช ุตุนูุฏ ุนุงู."}'
```

**ูพุงุณุฎ ููููู:**
```json
{
  "sentiment": "Bullish",
  "confidence": 0.85,
  "keywords": {
    "bullish": 2,
    "bearish": 0,
    "total": 2
  }
}
```

### 3. WebSocket ุจุฑุง ุจูโุฑูุฒุฑุณุงูโูุง ูุญุธูโุง

#### WS /ws
โ ุฌุฑุงู ุฏุงุฏูโูุง ูุญุธูโุง ุงุฑุฒ ุฏุฌุชุงู

**ุงุดุชุฑุงฺฉ ุฏุฑ ฺฉ ููุงุฏ:**
```json
{
  "type": "subscribe",
  "symbol": "BTC"
}
```

**ุฏุฑุงูุช ุจูโุฑูุฒุฑุณุงู ููุช:**
```json
{
  "type": "price_update",
  "symbol": "BTC",
  "price": 50000.50,
  "timestamp": 1633659200000,
  "source": "binance"
}
```

## ๐ ุฑุงูโุงูุฏุงุฒ ุณุฑุน

### ูุฑุญูู 1: ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
pip install fastapi uvicorn httpx pydantic websockets
```

ุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงู requirements:

```bash
pip install -r requirements_crypto_server.txt
```

### ูุฑุญูู 2: ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ

```bash
python crypto_server.py
```

ุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช:

```bash
./start_crypto_server.sh
```

### ูุฑุญูู 3: ุชุณุช API

ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉูุฏ ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
- **ูุณุชูุฏุงุช API**: http://localhost:8000/docs
- **ุจุฑุฑุณ ุณูุงูุช**: http://localhost:8000/health

## ๐ ูุงูโูุง ุงุฌุงุฏ ุดุฏู

### ุณุฑูุฑ ุงุตู
- **`crypto_server.py`** - ุณุฑูุฑ ุงุตู FastAPI (1000+ ุฎุท)

### ุชุณุช ู ูููููโูุง
- **`test_crypto_server.py`** - ูุฌููุนู ุชุณุชโูุง ุฌุงูุน (500+ ุฎุท)
- **`example_http_client.py`** - ฺฉูุงูุช HTTP ุชุนุงูู (250+ ุฎุท)
- **`example_websocket_client.py`** - ฺฉูุงูุช WebSocket ุชุนุงูู (350+ ุฎุท)

### ูุณุชูุฏุงุช
- **`CRYPTO_SERVER_README.md`** - ูุณุชูุฏุงุช ฺฉุงูู (800+ ุฎุท)
- **`QUICK_START_CRYPTO_SERVER.md`** - ุฑุงูููุง ุดุฑูุน ุณุฑุน (250+ ุฎุท)
- **`IMPLEMENTATION_SUMMARY_CRYPTO_SERVER.md`** - ุฎูุงุตู ูพุงุฏูโุณุงุฒ

### ูพฺฉุฑุจูุฏ
- **`requirements_crypto_server.txt`** - ูุณุช ูุงุจุณุชฺฏโูุง
- **`start_crypto_server.sh`** - ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ

## ๐งช ุชุณุช ฺฉุฑุฏู

### ุงุฌุฑุง ุชุณุชโูุง

```bash
# ุชุณุช ฺฉุงูู
python test_crypto_server.py

# ฺฉูุงูุช HTTP
python example_http_client.py demo

# ฺฉูุงูุช WebSocket
python example_websocket_client.py BTC ETH
```

## โก ูุงุจูุชโูุง ูพุดุฑูุชู

### ูุญุฏูุฏุช ูุฑุฎ ุฏุฑุฎูุงุณุช (Rate Limiting)
โ 100 ุฏุฑุฎูุงุณุช ุฏุฑ ุฏููู ุจุฑุง ูุฑ ฺฉูุงูุช
- ุดูุงุณุง ุจุฑ ุงุณุงุณ IP
- ูพุงุณุฎ 429 ููฺฏุงู ุชุฌุงูุฒ ุงุฒ ุญุฏ
- ุจุงุฒูุดุงู ุฎูุฏฺฉุงุฑ ูพุณ ุงุฒ 60 ุซุงูู

### ูุฏุฑุช ุฎุทุง
โ ูุฏุฑุช ุฌุงูุน ุฎุทุงูุง ุจุง ฺฉุฏูุง HTTP ููุงุณุจ:
- **400**: ูพุงุฑุงูุชุฑ ูุงูุนุชุจุฑ
- **404**: ููุงุฏ ูพุฏุง ูุดุฏ
- **429**: ูุญุฏูุฏุช ูุฑุฎ ุชุฌุงูุฒ ุดุฏ
- **500**: ุฎุทุง ุฏุงุฎู ุณุฑูุฑ
- **502**: ุฎุทุง API ุฎุงุฑุฌ
- **503**: ุณุฑูุณ ูููุชุงู ุฏุฑ ุฏุณุชุฑุณ ูุณุช
- **504**: ุฒูุงู ุฏุฑุฎูุงุณุช ุชูุงู ุดุฏ

### ููุงุจุน ุฏุงุฏู
โ ุฏุงุฏูโูุง ูุงูุน ุงุฒ API ุจุงููุณ
- ููุชโูุง ูุนู
- ุฏุงุฏูโูุง ุชุงุฑุฎ OHLC
- ุฏุงุฏูโูุง ุจุง ฺฉูุช ุจุงุฒุงุฑ

## ๐ ูููููโูุง ุงุณุชูุงุฏู

### Python - HTTP

```python
import requests

# ุฏุฑุงูุช ููุช
response = requests.get(
    "http://localhost:8000/api/market/price",
    params={"symbol": "BTC"}
)
print(response.json())

# ุชุญูู ุงุญุณุงุณุงุช
response = requests.post(
    "http://localhost:8000/api/sentiment/analyze",
    json={"text": "ุจุชโฺฉูู ุตุนูุฏ ุงุณุช!"}
)
print(response.json())
```

### Python - WebSocket

```python
import asyncio
import websockets
import json

async def connect():
    uri = "ws://localhost:8000/ws"
    
    async with websockets.connect(uri) as ws:
        # ุงุดุชุฑุงฺฉ ุฏุฑ BTC
        await ws.send(json.dumps({
            "type": "subscribe",
            "symbol": "BTC"
        }))
        
        # ุฏุฑุงูุช ุจูโุฑูุฒุฑุณุงูโูุง
        while True:
            message = await ws.recv()
            data = json.loads(message)
            
            if data["type"] == "price_update":
                print(f"ููุช BTC: ${data['price']:,.2f}")

asyncio.run(connect())
```

### JavaScript - WebSocket

```javascript
const ws = new WebSocket('ws://localhost:8000/ws');

ws.onopen = () => {
    console.log('ูุชุตู ุดุฏ');
    
    // ุงุดุชุฑุงฺฉ ุฏุฑ BTC
    ws.send(JSON.stringify({
        type: 'subscribe',
        symbol: 'BTC'
    }));
};

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    
    if (data.type === 'price_update') {
        console.log(`ููุช ${data.symbol}: $${data.price}`);
    }
};
```

## ๐ ูุนูุงุฑ

### ุงุฌุฒุง ุณุณุชู

1. **FastAPI Application** - ูุฑูโูุฑฺฉ ูุจ ูุฏุฑู
2. **Rate Limiter** - ูุญุฏูุฏฺฉููุฏู ูุฑุฎ ุฏุฑุฎูุงุณุช
3. **WebSocket Manager** - ูุฏุฑุช ุงุชุตุงูุงุช WebSocket
4. **Sentiment Analyzer** - ุชุญููฺฏุฑ ุงุญุณุงุณุงุช
5. **Market Data Fetcher** - ุฏุฑุงูุชโฺฉููุฏู ุฏุงุฏูโูุง ุจุงุฒุงุฑ
6. **Background Tasks** - ูุธุงู ูพุณโุฒููู ุจุฑุง ุจูโุฑูุฒุฑุณุงู

### ุฌุฑุงู ุฏุงุฏู

```
ฺฉูุงูุช โ ูุญุฏูุฏฺฉููุฏู ูุฑุฎ โ ููุทู ูพุงุงู โ ุฏุฑุงูุช ุฏุงุฏู โ API ุจุงููุณ
                                            โ
                                    ูพุงุณุฎ โ ฺฉูุงูุช

WebSocket:
ฺฉูุงูุช โ ุงุดุชุฑุงฺฉ โ ูุฏุฑุช ุงุชุตุงู โ ูุธูู ูพุณโุฒููู โ ุจูโุฑูุฒุฑุณุงู โ ูุดุชุฑฺฉู
```

## ๐ง ูพฺฉุฑุจูุฏ

### ูุชุบุฑูุง ูุญุท

```bash
# ูพูุฑุช ุณูุงุฑุด
PORT=8080 python crypto_server.py

# ูุงุณุช ู ูพูุฑุช ุณูุงุฑุด
HOST=0.0.0.0 PORT=8080 python crypto_server.py
```

### ุงุณุชูุฑุงุฑ Production

```bash
# ุจุง Uvicorn
uvicorn crypto_server:app --host 0.0.0.0 --port 8000 --workers 4

# ุจุง Gunicorn
gunicorn crypto_server:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000
```

## ๐ ูุชุฌู

ุณุฑูุฑ ุงุฑุฒ ุฏุฌุชุงู **ฺฉุงููุงู ฺฉุงุฑุจุฑุฏ** ู **ุขูุงุฏู ุงุณุชูุงุฏู** ุงุณุช. ุชูุงู ุงูุฒุงูุงุช ูพุฑุงููพุช ุงุตู ูพุงุฏูโุณุงุฒ ุดุฏูโุงูุฏ:

โ GET /api/market/price - ููุชโูุง ูุนู  
โ GET /api/market/ohlc - ุฏุงุฏูโูุง ุชุงุฑุฎ OHLC  
โ POST /api/sentiment/analyze - ุชุญูู ุงุญุณุงุณุงุช  
โ WebSocket /ws - ุฌุฑุงู ูุญุธูโุง  
โ ูุญุฏูุฏุช ูุฑุฎ - 100 ุฏุฑุฎูุงุณุช/ุฏููู  
โ ูุฏุฑุช ุฎุทุง - ุชูุงู ฺฉุฏูุง HTTP  
โ ูุณุชูุฏุงุช - ฺฉุงูู ุจุง ูููููโูุง  
โ ุชุณุช - ูุฌููุนู ุชุณุช ฺฉุงูู  

**ุณุฑูุฑ ุขูุงุฏู ุงุณุชูุฑุงุฑ ู ุงุณุชูุงุฏู ุงุณุช! ๐**

## ๐ ูุณุชูุฏุงุช ุจุดุชุฑ

- **ุฑุงูููุง ฺฉุงูู**: CRYPTO_SERVER_README.md
- **ุดุฑูุน ุณุฑุน**: QUICK_START_CRYPTO_SERVER.md
- **ุฎูุงุตู ูพุงุฏูโุณุงุฒ**: IMPLEMENTATION_SUMMARY_CRYPTO_SERVER.md
- **ูุณุชูุฏุงุช ุชุนุงูู**: http://localhost:8000/docs (ููฺฏุงู ุงุฌุฑุง ุณุฑูุฑ)

## ๐ก ูฺฉุงุช ููู

1. ุณุฑูุฑ ุงุฒ ุฏุงุฏูโูุง ูุงูุน API ุจุงููุณ ุงุณุชูุงุฏู ูโฺฉูุฏ
2. ุชูุงู ุนููุงุช I/O ุจู ุตูุฑุช async/await ูุณุชูุฏ
3. ูุฏุฑุช ุฎุทุง ุฌุงูุน ุจุฑุง ุชูุงู ุญุงูุงุช
4. ูุญุฏูุฏุช ูุฑุฎ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุณูุก ุงุณุชูุงุฏู
5. WebSocket ุจุง ูุงุจูุช ุงุดุชุฑุงฺฉ ู ูุบู ุงุดุชุฑุงฺฉ
6. ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ููุช ูุฑ 5 ุซุงูู
7. ูพุดุชุจุงู ุงุฒ ุงุชุตุงูุงุช ููุฒูุงู ูุชุนุฏุฏ

ูููู ุจุงุดุฏ! ๐
